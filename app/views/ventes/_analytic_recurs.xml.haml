- up_category.children.each do |category|
	- unit   = nil
	- ventes = @saison.ventes.select{|v| v.category_id.eql?(category.id)}
	- unit   = ventes[0].unit if (ventes[0] && @sum[:unit][category.code.to_sym].eql?(true))
	- coul 	 = "#{category.code}_head"
	%row{:bgcolor => @coul[coul.to_sym], :fontweight => "bold", :fontsize => "12", :level => "1"}
		%column{:content => "1"}
		%column{:content => ""}
		%column{:content => "#{category.name}"}
		%column{:content => "#{@sum[:prix][category.code.to_sym].to_i}", :halign => "right", :format => "0,000"}
		%column{:content => ""}
		%column{:content => ""}
		- if unit
			%column{:content => "#{@sum[:prix_unitaire][category.code.to_sym]} #{euro}/#{unit}"}
			%column{:content => "#{@sum[:quantite][category.code.to_sym]} #{unit}"}
		- else
			%column{:content => ""}		
			%column{:content => ""}
	
	- ventes = @saison.ventes.select{|v| v.category_id.eql?(category.id)}.each do |vente|
		- coul 	 = "#{vente.category.code}"
		%row{:bgcolor => @coul[coul.to_sym], :level => "2"}
			%column{:content => "2"}
			%column{:content => ""}
			%column{:content => ""}
			%column{:content => "#{vente.prix.to_i} #{euro}", :halign => "right", :format => "0,000"}
			%column{:content => "#{vente.name}"}
			%column{:content => "#{vente.date}"}
			%column{:content => "#{vente.prix_unitaire}#{euro}/#{vente.unit}", :halign => "right"}
			
		= render(:partial => "analytic_recurs", :locals => { :up_category => category}) if category.has_children?
