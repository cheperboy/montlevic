<table class=table_data>
  <tr class=bold>
    <th colspan=2>Categorie</th>
    <th>facture</th>
    <th colspan=2><%= euro_ha %></th>
    <th colspan=2><%= euro %></th>
  </tr>
  <tr>
    <td colspan=3><b>somme</b></td>
    <td class=value><b><%= delim(sum[:ha][:ventes]) %></b></td>
	<td class=unit><b><%= euro_ha %></b></td>
    <td class=value><b><%= delim(sum[:total][:ventes]) %></b></td>
	<td class=unit><b><%= euro %></b></td>
</tr>

<% sum[:ventes][:cats].each do |cat_id| %>
	<% cat = Category.find(cat_id) %>
	
	<tr>
	    <td colspan=7></td>
	</tr>
	<tr class=bg-cat>
	    <td><b><%= cat.name %></b></td>
	    <td></td>
	    <td></td>
	    <td class=value><b><%= delim(sum[:ventes][:ha]["#{cat.code.to_sym}"]) %></b></td>
		<td class=unit><b><%= euro_ha %></b></td>
	    <td class=value><b><%= delim(sum[:ventes][:total]["#{cat.code.to_sym}"]) %></b></td>
		<td class=unit><b><%= euro %></b></td>
	</tr>
	<%= render(:partial => "typecultures/marge_brute/ventes_recurs", :locals => {:typeculture => @typeculture, :cat => cat, :sum => sum }) %>	
<% end %>		
</table>
